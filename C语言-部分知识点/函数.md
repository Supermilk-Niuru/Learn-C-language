### 变量作用域、生存期、存储类型
#### 变量的作用域
###### 局部变量
在`{ }`内部定义，只能在所属函数中使用。

作用范围：从变量定义处开始，到该函数结束。函数结束后，其占用的内存会立即释放。

例如

```c
int* method();
int main()
{
    int *p = method();
    printf("%d\n",*p);
}
int* method()
{
    int a=10;
    return &a;
}
```

如果在`printf`前多加几行代码，绝对打印不出来10。如果不加，打印出来的结果是`10`，是由于内存还没来的及释放。**悬空指针**（详见“**指针**”部分）

---

###### 全局变量
在函数外边定义。

作用范围：从定义处开始，一直到整个代码结束。

如果在前面添加上`extern`,其作用域扩展到整个文件。

⚠️如果需要全局变量与局部变量的名称一致，在局部变量的作用域内，全局变量被屏蔽。如果要引用，需要在变量名称前面加上`::`。

例如：

```c
int a = 100;
void all()
{
    int a = 10;
    printf("%d\n",a);	//输出结果：10
    printf("%d\n",::a);//输出结果：100
}
```

#### 存储类型
`auto``static``extern``register`四类

| **<font style="color:rgb(31, 31, 31);">关键字</font>** | **<font style="color:rgb(31, 31, 31);">默认初始值</font>** | **<font style="color:rgb(31, 31, 31);">生存期</font>** | **<font style="color:rgb(31, 31, 31);">作用域</font>** |
| --- | --- | --- | --- |
| `**<font style="color:rgb(68, 71, 70);">auto</font>**`**<font style="color:rgb(68, 71, 70);">（只能在函数内定义）</font>** | <font style="color:rgb(31, 31, 31);">随机值</font> | <font style="color:rgb(31, 31, 31);">局部</font> | <font style="color:rgb(31, 31, 31);">局部 (函数内)</font> |
| `**<font style="color:rgb(68, 71, 70);">static</font>**` | **<font style="color:#DF2A3F;">0</font>** | <font style="color:rgb(31, 31, 31);">整个程序运行期间</font> | <font style="color:rgb(31, 31, 31);">局部或全局</font> |
| `**<font style="color:rgb(68, 71, 70);">extern</font>**` | <font style="color:rgb(31, 31, 31);">-</font> | <font style="color:rgb(31, 31, 31);">整个程序运行期间</font> | <font style="color:rgb(31, 31, 31);">整个项目 (跨文件)</font> |
| `**<font style="color:rgb(68, 71, 70);">register</font>**` | <font style="color:rgb(31, 31, 31);">随机值</font> | <font style="color:rgb(31, 31, 31);">局部</font> | <font style="color:rgb(31, 31, 31);">局部 (速度快)</font> |


#### 静态变量
###### 静态局部变量
作用域：和普通局部变量基本一致。

生存期：函数结束后，内存不会被释放，直到整个程序结束。

使用：递归中保留中间值，统计函数被调用的次数。

---

初始化：只会被初始化一次。

例如：

```c
for(i=0;i<3;i++)
{
    int j=0;
    j++;
    printf("%d ",j);
}
```

输出：`1 1 1`

```c
for(i=0;i<3;i++)
{
    static j=0;
    j++;
    printf("%d ",j);
}
```

输出：`1 2 3`

---

赋值：如果未赋初始值，系统自动赋初始值为`0`

###### 静态全局变量
作用域：只能在定义它的那个`.c`文件中使用。

### 函数作用域
###### 外部函数
能够在被其它`.c`文件调用。

###### 内部函数
仅限于当前`.c`文件。

### 函数的声明与调用（有参数的情况）
###### 普通变量
**声明**：`void func(int x)；`

**调用**：`func(a)；`

###### 指针变量
可在函数里面修改外面变量的值。

**声明**：`void update(int *p);`

**调用**：`update(&num);` // **一定是传入地址！**

###### 数组
**声明**：`void printArr(int arr[], int size);` // 习惯上要传长度，传长度便于让函数知道数组的大小。

**调用**：`printArr(myArr, 5);` // **<font style="color:#DF2A3F;">直接写数组名</font>**<font style="color:#DF2A3F;">！</font>**<font style="color:#DF2A3F;">直接写数组名</font>**<font style="color:#DF2A3F;">！</font>**<font style="color:#DF2A3F;">直接写数组名</font>**<font style="color:#DF2A3F;">！</font>

**注意事项**：C语言中传入的数组，实际上传入的是指针。

`void printArr(int arr[], int size);`->`void printArr(int *arr, int size);`

这就解释了，在调用的时候只用写数组名，因为数组名就是首地址。 

###### 字符串
字符串在 C 语言中就是 `char` 数组。

**声明**：`void shout(char *s);`

**调用**：`shout("Hello");` 或 `shout(myString);// "mystring"是变量名。`

<font style="color:#DF2A3F;">⚠️</font>**<font style="color:#DF2A3F;">定义/声明一定带上类型，而调用只用写名称，不需要带类型。</font>**

###### 指针变量接收数组
**声明**：`void func(int *p);`

**调用**：`func(a);`或`func(&a[0]);`//数组名即为首地址。

