### ç»“æ„ä½“çš„å®šä¹‰å’Œè°ƒç”¨
æŒ‡é’ˆç”¨`->`ï¼Œå˜é‡ç”¨`.`

```c
#include<stdio.h>
#include<string.h>
struct person
{
    char name[100];
    char gender;
    int age;
    double height;
};
int main()
{
    struct person m1;
    m1.age = 3;
    strcpy(m1.name,"zhangsan");
    printf("%s %d\n",m1.name,m1.age);
}
```

1. ç»“æ„ä½“ç›¸å½“äºè‡ªå·±å®šä¹‰äº†ä¸€ä¸ªæ•°æ®ç±»å‹ï¼Œå¦‚æœ¬å¤„çš„`struct person`ã€‚å°±ç›¸å½“äºæˆ‘ä»¬ä¹‹å‰å¸¸ç”¨çš„`int`,`double`ç­‰ç­‰
2. ç»“æ„ä½“ä¸­æ˜¯æœ‰ä¸€æ‰¹ç»„åˆè€Œæˆçš„æ•°æ®ã€‚
3. <font style="color:#DF2A3F;">ä¸è¦å¿˜è®°æœ€åçš„</font>`<font style="color:#DF2A3F;">;</font>`
4. `main`å‡½æ•°ä¸­çš„`struct person m1`,`m1`å°±æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå…¶æ•°æ®ç±»å‹æ˜¯`struct person`ã€‚ç±»ä¼¼äº`int a`

### ç»“æ„ä½“æ•°ç»„
+ **æ™®é€šå®šä¹‰**

```c
#include<stdio.h>
struct student
{
    char name[100];
    int age;
    char gender;
    double height;
};
int main()
{
    struct student person1 = {"zhangsan",4,'M',1.78};
    struct student person2 = {"lisi",5,'M',1.79};
    struct student person3 = {"wangwu",6,'F',1.80};
    struct student a[3] = {person1,person2,person3};
   int i;
   for(i=0;i<3;i++)
   {
        printf("%s,%d,%c,%lf\n",a[i].name,a[i].age,a[i].gender,a[i].height);
   }
}
```

å…¶å®å’Œä¹‹å‰å®šä¹‰æ•°ç»„ä¸€æ ·ï¼Œåªä¸è¿‡æŠŠå˜é‡ç±»å‹æ¢æˆäº†`struct student`

ç”±äº`printf`ä¸€æ¬¡æ€§åªèƒ½è¯»å–åŸºæœ¬ç±»å‹ï¼Œä¸èƒ½ç›´æ¥è¾“å‡ºæ•´ä¸ªç»“æ„ä½“ï¼Œæ‰€ä»¥è¦åˆ†å¼€è¾“å‡ºã€‚

ä¸ºäº†ä½¿ä»£ç å˜å¾—æ›´åŠ ç®€æ´ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸€ä¸‹`for`å¾ªç¯ä¸­çš„è¯­å¥ï¼š

```c
for(i=0;i<3;i++)
   {
        struct student tmp = a[i];
        printf("%s,%d,%c,%lf\n",tmp.name,tmp.age,tmp.gender,tmp.height);
   }
```

+ **æŒ‡é’ˆå®šä¹‰**

```c
#include<stdio.h>
struct student
{
    char name[100];
    int age;
    char gender;
    double height;
};
int main()
{
    struct student person1 = {"zhangsan",4,'M',1.78};
    struct student person2 = {"lisi",5,'M',1.79};
    struct student person3 = {"wangwu",6,'F',1.80};
    struct student *p[3] = {&person1,&person2,&person3};
    int i;
    for(i=0;i<3;i++)
    {
        printf("%s,%d,%c,%lf\n",p[i]->name, p[i]->age, p[i]->gender, p[i]->height);
    }
return 0;
```

`p[i]->name` å°±æ˜¯å»â€œ`p[i]` æ‰€æŒ‡å‘çš„é‚£å—å†…å­˜åœ°å€â€ä¸­ï¼Œæ‰¾åˆ°åä¸º `name` çš„é‚£ä¸ªæˆå‘˜ã€‚`p[i]`ä¸­å­˜å‚¨çš„æ˜¯ç»“æ„ä½“çš„åœ°å€ã€‚

```c
for(i=0;i<3;i++)
    {
        struct student *s = p[i];
        printf("%s,%d,%c,%lf\n",s->name,s->age, s->gender, s->height);
    }
```

**<font style="color:#DF2A3F;">ï¼ï¼ï¼</font>**`**<font style="color:#DF2A3F;">a[i].name</font>**`<font style="color:#DF2A3F;"> ç­‰ä»·äº </font>`**<font style="color:#DF2A3F;">p[i]->name</font>**`

###### èµ·åˆ«å
ç»“æ„ä½“å‰è¦åŠ ä¸Šå…³é”®å­—`typedef`

```c
#include<stdio.h>
typedef struct student
{
    char name[100];
    int age;
    char gender;
    double height;
} SD;
int main()
{
    SD person1 = {"zhangsan",40,'F',1.78};
    SD person2 = {"lisi",50,'M',1.79};
    SD person3 = {"wangwu",60,'F',1.80};
    SD a[3] = {person1,person2,person3};
    int i;
    for(i=0;i<3;i++)
    {
        SD tmp = a[i];
        printf("%s %d %c %lf\n",tmp.name,tmp.age,tmp.gender,tmp.height);
    }
    return 0;
}   
```

æ­¤æ—¶ï¼Œ`SD`å°±æ˜¯ç»“æ„ä½“`struct student`çš„åˆ«åï¼Œåç»­å°±å¯ä»¥ä¸å¿…åƒä¹‹å‰é‚£ä¹ˆç¹çå†™å…¨åï¼Œåªéœ€è¦ç”¨`SD`å³å¯(**<font style="color:#DF2A3F;">ä¸è¦</font>**åŠ `struct`)

### ç»“æ„ä½“ä½œä¸ºå‚æ•°çš„ä¼ é€’
+ **æŒ‡é’ˆä¼ é€’**

```c
//å§“åï¼Œå¹´é¾„ï¼Œèº«é«˜ï¼Œå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œä¿®æ”¹å…¶ä¸­çš„æ•°æ®ã€‚
#include<stdio.h>
#include<string.h>
typedef struct student
{
    char name[100];
    int age;
    double height;
} S;
void change(S *stu);
int main()
{
    S stu;
    //å¯¹ç»“æ„ä½“è¿›è¡Œåˆå§‹åŒ–
    strcpy(stu.name,"aaa");
    stu.age = 0;
    stu.height = 0.00;
    S *p = &stu;
    //å¼€å§‹è°ƒç”¨å‡½æ•°
    change(p);
    //å¼€å§‹è¾“å‡º
    printf("ä»–æ˜¯%s,å¹´é¾„æ˜¯%d,èº«é«˜æ˜¯ï¼š%lf\n",stu.name,stu.age,stu.height);
}
void change(S *stu)
{
    printf("è¯·è¾“å…¥ä½ æƒ³è¦å¯¹è°è¿›è¡Œä¿®æ”¹:\n");
    scanf("%s",s->name);
    printf("ä½ å°†ä»–çš„å¹´é¾„ä¿®æ”¹ä¸ºï¼š\n");
    scanf("%d",&(s->age));
    printf("ä½ å°†ä»–çš„èº«é«˜ä¿®æ”¹ä¸ºï¼š\n");
    scanf("%lf",&(s->height));
}
```

+ ç›´æ¥ä¼ é€’

æ”¹å˜é‡åªåœ¨è¯¥å‡½æ•°å†…éƒ¨èµ·ä½œç”¨ã€‚

### ç»“æ„ä½“çš„åµŒå¥—
```c
#include<stdio.h>
struct message
{
    char phone[100];
    char mail[100];
};
struct student
{
    char name[100];
    int age;
    struct message m1;
};
int main()
{
    struct student person1 = {"zhangsan",80,{"12345678","567890@qq.com"}};
    printf("%s\n",person1.m1.mail);
}
```

ç»“æ„ä½“åµŒå¥—æ—¶ï¼Œå¦‚æœä½¿ç”¨å¤§æ‹¬å·èµ‹å€¼ï¼Œä¹Ÿéœ€è¦åµŒå¥—ï¼

```c
//ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œç»Ÿè®¡A,B,C,Då››ä¸ªæ™¯ç‚¹çš„æŠ•ç¥¨æ•°ï¼Œå†³å®šæœ€åå»çš„æ™¯ç‚¹ï¼Œ80ä¸ªäººæŠ•ç¥¨ã€‚è‹¥ç¥¨æ•°ç›¸åŒï¼Œä¼˜å…ˆçº§A>B>C>D.
#include<stdio.h>
#include<stdlib.h>
#include<time.h>
/*
å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼ŒåŒ…å«æ™¯ç‚¹åå’Œç¥¨æ•°
ç”Ÿæˆéšæœºæ•°
ç»Ÿè®¡ç¥¨æ•°
æ¯”è¾ƒç¥¨æ•°ï¼Œå¾—å‡ºæœ€é«˜ç¥¨æ•°çš„æ™¯ç‚¹
ç›¸åŒç¥¨æ•°çš„å¤„ç†
è¾“å‡ºç»“æœ
*/
struct Spots
{
    char name;
    int vote;
};

void count(struct Spots m1[4]);

int main()
{
    struct Spots m1[4]= {{'A',0},{'B',0},{'C',0},{'D',0}};
    count(m1);
    return 0;
}
void count(struct Spots m1[4])
{
    int i,k;
    srand(time(NULL)); 
    //ç»Ÿè®¡ç¥¨æ•°
    for(i=0;i<80;i++)
    {
        int p = rand() % 4; 
        int choose = p%4;
        m1[choose].vote++;
    }
    //æ¯”è¾ƒç¥¨æ•°,æ‰¾åˆ°æœ€å¤§ç¥¨æ•°
    int max = m1[0].vote;
    k = 0;
    for(i=1;i<=3;i++)
    {
        if(max < m1[i].vote)
        {
            max = m1[i].vote;
            k = i;
        }
        //ç›¸åŒç¥¨æ•°çš„å¤„ç†
        else if(max == m1[i].vote)
        {
            continue;
        }
    }
    //è¾“å‡ºç»“æœ
    printf("ç¥¨æ•°æœ€é«˜çš„æ™¯ç‚¹æ˜¯%c,å®ƒçš„ç¥¨æ•°æ˜¯%d\n",m1[k].name,m1[k].vote);
    for(i=0;i<=3;i++)
    {
        printf("æ™¯ç‚¹%c,ç¥¨æ•°%d\n",m1[i].name,m1[i].vote);
    }
}
```

### å†…å­˜å¯¹é½
æ™®é€šå˜é‡å’Œç»“æ„ä½“éƒ½æœ‰å†…å­˜å¯¹é½ã€‚

###### ç»“æ„ä½“çš„å†…å­˜æ€»å¤§å°
æœ€å¤§ç±»å‹æ‰€å å­—èŠ‚æ•°çš„æ•´æ•°å€ã€‚

###### æ¯ä¸€ä¸ªå˜é‡çš„ä½ç½®
å¿…é¡»æ”¾åœ¨å…¶ç±»å‹å¤§å°çš„æ•´æ•°å€çš„å†…å­˜åœ°å€ä¸Š(**<font style="color:#DF2A3F;">CPUè¯»å–å†…å­˜æ˜¯æ•´å—æ•´å—åœ°è¯»ï¼Œä¸æ˜¯ä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚åœ°è¯»ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœæ—¶é—´</font>**)ã€‚ç”±äºè¡¥ä½äº§ç”Ÿçš„ä¸­é—´ç©ºç¼ºçš„å†…å­˜å•å…ƒï¼Œå¹¶ä¸æ˜¯æ„å‘³ç€ä¸Šä¸€ä¸ªå˜é‡æ‰€å æ®çš„å†…å­˜å¢åŠ äº†ã€‚

**ç»“è®º**ï¼šæ•°æ®ç±»å‹æ‰€å å­—èŠ‚æ•°ä»å°åˆ°å¤§æ’åˆ—(<font style="color:#117CEE;">å¦‚æœæœ‰ç›¸åŒå­—èŠ‚çš„ï¼Œæ’åœ¨ä¸€èµ·</font>)ï¼Œå¯ä»¥èŠ‚çº¦ç©ºé—´ï¼Œé¿å…æµªè´¹ã€‚

### è”åˆä½“(å…±ç”¨/åŒä½“)
ä¸€ä¸ªæ•°æ®å¯èƒ½æœ‰å¤šç§ç±»å‹å»è¡¨ç¤ºï¼Œæˆ‘ä»¬å°±è¦ä½¿ç”¨è”åˆä½“`union`

###### å®šä¹‰å’Œè°ƒç”¨è”åˆä½“
è”åˆä½“çš„å®šä¹‰ä¸è°ƒç”¨å’Œç»“æ„ä½“çš„å®šä¹‰ä¸è°ƒç”¨ç±»ä¼¼ï¼Œèµ·åˆ«åä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚

**<font style="color:#DF2A3F;">åœ¨èµ‹å€¼æ—¶æ¯æ¬¡åªèƒ½èµ‹ä¸€ä¸ªå€¼ï¼ï¼ï¼ç¬¬äºŒæ¬¡èµ‹å€¼ä¼šè¦†ç›–åŸæœ‰çš„æ•°æ®ã€‚</font>**

```c
union Moneytype
{
    int money1;
    double money2;
    char money3[100];
}ï¼›
int main()
{
    union Moneytype m1;
    m1.money1 = 100;
    printf("%d\n",m1.money1);
    return 0;
}
```

```c
typedef Moneytype
{
    int money1;
    double money2;
    char money3[100];
}Mt;
int main()
{
    M m1;
    m1.money1 = 100;
    printf("%d\n",m1.money1);
    return 0;
}
```

###### å ç”¨å†…å­˜(æ³¨æ„å†…å­˜å¯¹é½)
$ æ‰€å å†…å­˜çš„å¤§å°=è”åˆä½“ä¸­æœ€å¤§æˆå‘˜å ç”¨çš„å†…å­˜å¤§å°(ä¸”æ€»å¤§å°æ˜¯æœ€å¤§æˆå‘˜çš„æ•´æ•°å€) $

**æ³¨æ„**ï¼š

`char money3[100]`æ˜¯æŒ‰ç…§$ 100 $ä¸ª`char`ç±»å‹å­˜å‚¨ã€‚

`m1`æ‰€å å­—èŠ‚æ•°æ˜¯$ 104 $ã€‚

### åŠ¨æ€å†…å­˜åˆ†é…
###### å¸¸ç”¨å‡½æ•°
`malloc`ï¼šç”³è¯·**<font style="color:#DF2A3F;">è¿ç»­</font>**ç©ºé—´ã€‚

`calloc`ï¼šç”³è¯·ç©ºé—´å¹¶ä¸”æ•°æ®åˆå§‹åŒ–ã€‚

`realloc`ï¼šæ”¹å†™å†…å­˜ç©ºé—´å¤§å°ã€‚

`free`ï¼šé‡Šæ”¾å†…å­˜ç©ºé—´ã€‚

```c
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
int main()
{
    //int *p = malloc(sizeof(int)*10);
    int *p = calloc(10,sizeof(int));
    //èµ‹å€¼
    int i;
    for(i=0;i<10;i++)
    {
        *(p+i) = (i+1)*10;
        //printf("%d ",p[i]);
    }
    //å†…å­˜æ‰©å®¹
    int *pp = realloc(p,sizeof(int)*20);
    for(i=0;i<20;i++)
    {
        //*(p+i) = (i+1)*10;
        printf("%d ",pp[i]);
    }
    //printf("%d ",pp[0]);
    free(pp);
    return 0;
    
}
```

**æ³¨æ„**ï¼š

1. é¿å…ä¸åŒç¼–è¯‘ç¯å¢ƒçš„å½±å“ï¼Œä½¿ç”¨`sizeof()`æ¥è¡¨ç¤ºç”³è¯·çš„å†…å­˜å¤§å°ï¼Œä½¿ä»£ç æ›´æœ‰æ™®é€‚æ€§ã€‚
2. ä¸€èˆ¬å¸¸ä½¿ç”¨`malloc`å‡½æ•°ï¼Œæ•ˆç‡æ›´é«˜ï¼Œå¦‚æœæœªèµ‹åˆå§‹å€¼ï¼Œåˆ™è¾“å‡ºçš„æ˜¯æ®‹ç•™å€¼ã€‚
3. å†…å­˜æ‰©å®¹ä¹‹åï¼Œèµ‹å€¼ï¼Œè¾“å…¥ã€è¾“å‡º**<font style="color:#DF2A3F;">ä¸è¦ç”¨åŸæ¥çš„æŒ‡é’ˆ</font>**ï¼Œå› ä¸ºåŸæ¥çš„æŒ‡é’ˆçš„å†…å­˜å·²ç»è¢«é‡Šæ”¾ï¼Œæˆä¸ºäº†é‡æŒ‡é’ˆ(ğŸ˜œ<font style="color:#117CEE;">å½“ç„¶ï¼Œä¹Ÿæœ‰ç‰¹æ®Šæƒ…å†µï¼ŒåŸåœ°å€åé¢ç©ºé—´è¶³å¤Ÿï¼Œ</font>`<font style="color:#117CEE;">realloc</font>`<font style="color:#117CEE;">ä¼šç›´æ¥åœ¨åé¢æ·»åŠ ï¼Œæ–°æ—§æŒ‡é’ˆçš„åœ°å€å®Œå…¨ä¸€æ ·</font><font style="color:#117CEE;">ğŸ˜œ</font>)ã€‚æœ€åçš„å†…å­˜é‡Šæ”¾**<font style="color:#DF2A3F;">ä½¿ç”¨æ‰©å®¹ä¹‹åçš„æ–°æŒ‡é’ˆ</font>**ï¼Œå¦‚æœå†æ¬¡ä½¿ç”¨åŸæ¥çš„æŒ‡é’ˆï¼Œå°±ä¼šå‡ºç°äºŒæ¬¡é‡Šæ”¾ï¼Œç¼–è¯‘å™¨ä¼šå¼ºåˆ¶åœæ­¢è¿è¡Œ(`zsh: abort`)ã€‚

